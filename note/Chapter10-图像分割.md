# 第10章 图像分割

## 引言

**说明**：本小节讲了图像分割在图像系统中的**地位**、**定义**、**难点**、**思路**进行了阐述。

**说明**：图像分割属于输入是图像、输出是图像属性的**范畴**。

**Q**：分割的**定义**？

**A**：将图像分成“有意义”的区域。分割将图像细分为构成它的子区域或物体。细分的程度取决于要解决的问题。

**说明**：**异常图像的分割**是图像处理中**最困难的**任务之一。**分割的精度**决定了计算分析过程的最终成败。

**Q**：关于分割，有哪些**方法**？

**A**：灰度阈值分割、基于边界的图像分割、基于区域的图像分割、形态学分割、基于模板分割。 

**Q**：分割在图像分析系统中的**地位**？

**A**：视频1‘有图片。

1）**低级处理**：图像获取、预处理；

2）**中级处理**：**分割**、表示与描述；

3）**高级处理**：识别与解释。

**Q**：分割算法的**基本原理**有哪些？

**A**：

1）图像分割是按照某些**特性**（如灰度级、频谱、纹理等）将图像划分成一些区域，在这些区域内其特性是相同的或者说是均匀的，两个相邻区域彼此特性则是不同的，其间存在着边缘或边界；

2）本章中的多数分割算法均基于灰度值的两个**基本性质**之一：**不连续性**——区域之间和**相似性**——区域内部。

**Q**：**不连续性**的**定义**？

**A**：不同区域交界、边缘处像素灰度值具有不连续突变。

**Q**：如何利用不连续性进行图像分割？

**A**：首先要找到区域交界处的点、线（宽度为1）、边（不定宽度），再确定区域，该方法就叫边界分割法。

**Q**：相似性的定义？

**A**：同一区域内像素一般具有**灰度相似性**，据此找到灰度值相似的区域；**区域的外轮廓**就是**对象的边缘**。

**Q**：进行图像分割的**步骤**有哪些？

1）**边缘检测**：**图像锐化**中讲了**边缘检测**，有Sobel算子等算子都能检测出图像的边缘，如果可以得到这些**边缘**，就可以进而得到**边界**，再对图像进行**分割**；

2）**边缘连接**：除了进行**边缘检测**外，还需要将**边缘线段连接**、“组装”成为**边界**，然后依据边界对图像进行**分割**。有可能利用图像的先验知识，比如成向的环境与目标。

**Q**：图像分析的**步骤**有哪些？

**A**：分割、特征提取、识别与分类、结论（描述、分类或其他的结论）。

**Q**：图像分割的**重要性**？

**A**：图像分割是在图像特征提取之前的工作，其分割结果的好坏直接影响图像分析的结果。

**重要结论**：图像分割的方法很多，但没有一种方法可以很好的分割任意一幅图像。不同类的图像有不同的分割方法，或者有时需要几种分割方法结合使用。

**Q**：图像分割的**难点**有哪些？

**A**：

1）图像数据的**模糊**和**噪声**干扰；

2）图像分割与特征值之间的矛盾，解决方法是先验知识和样本等；

3）分割结果好坏**没有统一的评价标准**。（标准图像，或者计算统计误差）。

**Q**：进行图像分割的**基本思路**？

**A**：

1）控制光照环境（光源）和采用合适传感器（红外），有助于正确、有效地分割；

2）从简到难，逐级分割；

3）把焦点放在增强感兴趣对象，缩小不相干图像成分的干扰上。

**Q**：图像分割的**本质**是什么？

**A**：图像分割本质上是**图像像素按照不同特征进行分类的过程**。

## 10.1 基础知识

**Q**：图像分割的**数学定义**？

**A**：基于**集合理论**，见书P443或视频24’。

**Q**：像素不连续性的定义?

**A**：不同区域交界、边缘处像素灰度值具有不连续突变型。

## 10.2 点、线和边缘检测

**Q**：本节主要讲了啥？

**A**：本节主要介绍以灰度局部剧烈变化检测为基础的分割方法（segmentation methods）。

**说明**：孤立点、线和边缘属于图像特征的范畴。可以这么这为多个孤立点组成线，多条线组成边缘。

### 10.2.1 背景知识

abrupt

evident

dash

**说明**：平均处理类似于积分，局部变化可以用微分来检测。

**Q**：计算图像一阶导数和二阶导数有什么**意义**？

**A**：计算图像的一阶导数和二阶导数对我们研究图像的**点**、**线**和**边缘检测**有着重要的意义，因为我们能够**根据图像一阶导数和二阶导数的值大体推出图像点、线和边缘的信息**。

**Q**：图像中一阶导数和二阶导数的**计算表达式**是什么？

**A**：见书本中式子（10.2-1）和（10.2-2）。

**说明**：如果要将边缘进一步分类的话，可以根据边缘的**陡峭程度**分为**斜坡边缘**和**台阶边缘**。

**Q**：计算图像一阶导数和二阶导数，我们能**得到关于该图像的哪些信息**？

**A**：书中围绕图10.2具体分析得到如下4个**重要结论**：

1）一阶导数通常在图像中产生较粗的边缘；

2）**二阶导数**对精细细节，如细线、**孤立点**和噪声有较强的响应；

3）二阶导数在灰度坡度和灰度台阶过渡处产生双边（double-edge）响应；

4）二阶导数的符号可以用于确定边缘的过渡是从亮到暗还是从暗到亮。

**Q**：在实际工程中，如何计算图像中每个像素位置的一阶导数和二阶导数？

**A**：使用**模板**对一幅图像进行空间滤波。

### 10.2.2 孤立点的检测

**Q**：孤立点检测的**数学基础**是什么？

**A**：基于10.2.1小节得到的结论，我们可知点的检测应以**二阶导数**为基础。

**Q**：孤立点检测的模板是什么？

**A**：具体见课本P448。

### 10.2.3 线检测

Q：线检测的**数学基础**是什么？

A：基于10.2.1小节得到的结论，我们可知点的检测应以二阶导数为基础。

Q：线检测的**原理**是什么？

A：将4个模板（具体模板见书P450或参考资料[3]视频26'）分别对4个方向上单像素宽的线有最大响应。

Q：如要检测接近22.5度的线该怎么做呢？

A：根据前面的模板，构造5*5的模板可以实现，具体模板见参考资料[3]视频29'。

## 10.3 阈值处理

**阈值分割概念**

**Q**：图像阈值（门限）分割的**特点**和**地位**？

**A**：图像阈值（门限）分割具有**直观**和**易于实现**的特点，在**图像分割应用**中占用**重要地位**。

### 10.3.1 基础知识

**灰度阈值处理基础**

**说明**：灰度阈值处理在**数学**上可以看做**函数**，具体见式（10.3-1）。

**Q**：阈值处理的**分类**？

**A**：全局的、局部的、自适应的。

**Q**：全局阈值处理的**定义**？

**A**：当阈值是一个适用于整个图像的常数时，该阈值处理为**全局阈值处理**。

**Q**：如何评价单一阈值分割？

**A**：分割结果是二值图。能否分割成功，完全取决于图像的直方图能否被很好地分割，这是单一阈值分割的缺点。

**图像阈值处理中噪声的作用**

**结论**：图像中的噪声对图像阈值处理有**消极作用**，也就是说噪声的存在不利用图像阈值处理。书本中使用图例说明了这个结论。

**光照和反射的作用**

**结论**：光照和反射对图像阈值处理有**消极作用**，也就是说光照和反射的存在不利用图像阈值处理。书本中使用图例说明了这个结论。

### 10.3.2 基本的全局阈值处理

**Q**：自动计算门限T的算法的原理？

**A**：选择初始阈值、多次迭代、利用两个集合的平均灰度值。

**结论**：全局门限处理能够在高度可控环境中得到成功应用，如工业检测邻域。

### 10.3.3 用Otsu方法的最佳全局阈值处理

**Q**：Otsu方法的基本思想？

**A**：让区域内部高度相似，区域之间总体差异最大（用方差描述）。

**Q**：Otsu方法的具体做法？

**A**：假设阈值k，来考察其统计特性，如概率、平均灰度、方差。

**Q**：引入关于阈值的评价标准？

**A**：求方差比值的最大值时的值就为阈值。

**Q**：如何**评价**Otsu方法？

**A**：

1）最大方差阈值；

2）在选择阈值时，无需人工参与；

### 10.3.4 用图像平滑改善全局阈值处理

**Q**：用图像平滑改善全局阈值处理的应用条件是是什么？

**A**：当待全局阈值处理的图像**存在噪声**时需要用图像平滑改善全局阈值处理。

**Q**：如何评价用图像平滑改善全局阈值处理？

**A**：阈值处理的**效果非常好**，缺点是平滑一幅图像腐蚀得越多，分割后的结果中的**边界误差**就越大。

### 10.3.5 利用边缘改进全局阈值处理



## 参考资料

1. 数字图像处理 冈萨雷斯 第三版
2. [【公开课】数字图像处理-曹茂永主讲-山东科技大学 国家精品课程]( https://www.bilibili.com/video/av33675799?p=31 )
3. [数字图像处理-电子科技大学-李庆嵘 教学篇完整版（另有复习篇与习题篇）]( https://www.bilibili.com/video/av69532731?p=43 )

